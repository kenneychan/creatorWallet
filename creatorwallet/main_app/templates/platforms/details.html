{% extends 'base.html' %} {% block content %}

<div class="container">
  <h2>Platform Details</h2>
  <nav>
    <div class="nav-wrapper blue">
      <div class="col s12">
        <a href="{% url 'platforms_index' %}" class="breadcrumb">All Platforms</a>
        <a href="" class="breadcrumb" style="pointer-events: none;">{{ platform.name }}</a>
      </div>
    </div>
  </nav>
  <div class="row">
    <div class="col s4">
      <div class="card hoverable">
        <div class="card-content">
          <span class="card-title">{{ platform.name }}</span>
          <p>Url: {{ platform.url }}</p>
          <p>Platform Userame: {{ platform.platform_username }}</p>
  
          {% if stats %} {% for key, value in stats.0.items %}
          <p>{{ key | capfirst }}: {{ value }}</p>
          {% endfor %}
        </div>
        {% endif %}
        <div class="card-action">
          <a class="modal-trigger btn-floating waves-effect waves-light blue" href="#editPlatformModal_{{ platform.id }}"
            type="submit"><i class="material-icons">edit</i></a>
          <a class="modal-trigger btn-floating waves-effect blue" href="#deletePlatformModal_{{ platform.id }}"><i
              class="material-icons">delete</i></a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- edit modal -->
<div class="modal editPlatformModal" id="editPlatformModal_{{ platform.id }}">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="modal-close btn-floating btn-small waves-effect blue" id="closePlatformModal">
        <span>&#10006;</span>
      </button>
      <h4 class="modal-title">Edit <span class="blue-text">{{ platform.name }}</span></h4>
    </div>
    <form action="{% url 'platforms_form' platform.id %}" method="POST">
      <div class="modal-body" id="platform-modal-body">
        {% csrf_token %}
        {% for field in PlatformForm %}
        <div class="input-field">
          {{ field.errors }}
          <label for="id_{{ field.name }}">{{ field.label }} <span style="color:red;">*</span></label>
          {% if field.name == "name" %}
          <input type="text" name="{{ field.name }}" maxlength="50" required id="id_{{ field.name }}"
            value="{{ platform.name }}">
          {% elif field.name == "url" %}
          <input type="url" name="{{ field.name }}" maxlength="100" required="" id="id_{{ field.name }}"
            value="{{ platform.url }}">
          {% elif field.name == "platform_username" %}
          <input type="text" name="{{ field.name }}" maxlength="50" id="id_{{ field.name }}"
            value="{{ platform.platform_username }}">
          {% endif %}
        </div>
        {% endfor %}
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary btn-floating btn-large blue waves-effect waves-light" type="submit"
          id="submitPlatformModal"><i class="material-icons">save</i></button>
      </div>
    </form>
  </div>
</div>
<!-- delete modal -->
<div class="modal deletePlatformModal" id="deletePlatformModal_{{ platform.id }}">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="modal-close btn-floating btn-small waves-effect blue" id="closePlatformModal">
        <span>&#10006;</span>
      </button>
      <h4 class="modal-title">Delete <span class="blue-text">{{ platform.name }}</span></h4>
    </div>
    <form action="{% url 'platforms_delete' platform.id %}" method="POST">
      <div class="modal-body">
        <h5>Are you sure you want to delete <span class="blue-text">{{ platform.name }}</span>?</h5>
        {% csrf_token %}
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn waves-effect waves-light blue">Yes - Delete!</button>
        <a class="modal-close">Cancel</a>
      </div>
    </form>
  </div>
</div>

{% endblock %}
